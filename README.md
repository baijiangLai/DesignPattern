# 设计模式
## UML
[UML](https://github.com/baijiangLai/DesignPattern/tree/master/UML)
## 设计原则
[设计原则](https://github.com/baijiangLai/DesignPattern/tree/master/principle)
## 创建型
### 单例模式
定义：

确保一个类只有一个实例，而且自行实例化并向整个系统提供这个实例。

前半句：构造方法只能是private，因为只有一个实例，那么这个实例应该是当前类的类成员变量(static)

后半句：提供一个静态方法，以便于提供这个实例。

类图：

![单例模式类图](https://mypc-1313021454.cos.ap-beijing.myqcloud.com/designPattern/creationType/202305031727067.png)

### 简单工厂模式
其实该模式并不属于设计模式23个设计模式的类型。但是由于使用较多，因此本仓库加入

定义：

在该模式中，可以根据参数的不同从而返回不同类的实例。

专门定义一个类负责创建其他类的实例，被创建的实例通常都有共同的父类。

类图：
![简单工厂类图](https://mypc-1313021454.cos.ap-beijing.myqcloud.com/designPattern/creationType/202305031727409.png)

优点：
实现了对象的创建和使用分离。
创建交给专门的工厂类负责，程序员不需要关心如何去创建的，直接使用即可。

缺点：
不够灵活，如果新增一个产品就需要去修改工厂类。

### 原型模式
举例：

高中生物知识，在细胞有丝分裂的时候，一个细胞会分裂成两个一模一样的细胞。

或者

你想去复制一辆汽车，但是汽车零部件又很麻烦你不想什么都去复制，此时就可以用到原型模式

定义：

使用原型实例指定待创建对象的类型，并且通过复制这个原型来创建新的对象。

类图：

![原型模式类图](https://mypc-1313021454.cos.ap-beijing.myqcloud.com/designPattern/creationType/202305031727076.png)

### 工厂模式
![工厂模式直观](https://mypc-1313021454.cos.ap-beijing.myqcloud.com/designPattern/creationType/202305031728083.png)

定义一个用于创建对象的接口，让子类决定实例化哪个类。工厂方法使一个类的实例化延迟到其子类。

接口：就是工厂的抽象接口

让子类决定实例化哪个类：即让具体的某个工厂去实例化具体的产品。 

类图：

![工厂模式类图](https://mypc-1313021454.cos.ap-beijing.myqcloud.com/designPattern/creationType/202305031728685.png)

个人理解： 定义两个接口，一个接口用来规范工厂的行为，一个接口用来规范实际产品的行为。
具体的工厂实现工厂接口，具体的产品实现产品接口。
每个工厂生产指定的产品

角色：
1. 抽象工厂
2. 具体工厂A
3. 具体工厂B...
4. 产品体系

### 抽象工厂模式
![抽象工厂直观](https://mypc-1313021454.cos.ap-beijing.myqcloud.com/designPattern/creationType/202305031728691.png)

由于工厂模式只能生产一个大类的产品，所有的产品都必须产品的接口。
抽象工厂模式使得工厂不仅仅可以生产某一个大类的产品，还可以生产其他大类的产品。
抽象工厂打破了一个具体工厂只能生产一个大类的限制。


抽象工厂模式只是工厂模式的一个扩展，当只有一个产品体系的时候就退回工厂模式。

如果新增一个产品体系，就必须在工厂类进行修改。

类图：

![抽象工厂类图](https://mypc-1313021454.cos.ap-beijing.myqcloud.com/designPattern/creationType/202305031728817.png)

个人理解： 就是一个工厂模式的变形，只是在工厂里面生产的东西不仅仅局限于一类了。

角色：
1. 抽象工厂
2. 具体工厂A
3. 具体工厂B...
3. 产品体系A
4. 产品体系B...

### 建造者模式
举例：

现在使用的电脑有很多东西：CPU、ram架构、usb接口个数、键盘、显示器....，那么此时可以一步步构建一个电脑出来，而非对每个参数都设置构造器。


定义：

使用多个简单的对象一步步构建一个复杂的对象(当一个类的构造参数超过4个，并且这里面的参数有些是可选，可以考两次使用创建者模式)。

类图：

![建造者模式类图](https://mypc-1313021454.cos.ap-beijing.myqcloud.com/designPattern/creationType/202305031728980.png)


## 结构型
### 代理模式
举例：

租房的时候大多数会去找中介帮自己找，因为自己无法直接联系到房东，那么此时中介就是一个代理人。

代理模式最重要的地方：客户端无法直接访问。


定义：

为其他对象提供一种代理以控制对这个对象的访问

类图：

![代理模式类图](https://mypc-1313021454.cos.ap-beijing.myqcloud.com/designPattern/strcturalType/202305031725883.png)

### 适配器模式
定义：

将一个类的接口变换程客户端所期待的另一种接口，从而使原本因接口不匹配而无法在一起工作的两个类能在一起工作。

举例：

新闻播放中会有一个手语老师，这个手语老师对于听力障碍人士就是一个很好的适配器。


类图：


与装饰器模![适配器模式类图](https://mypc-1313021454.cos.ap-beijing.myqcloud.com/designPattern/strcturalType/202305031725827.png)式的区别：

1. 装饰器模式会对原有接口进行扩展，需要修改原来的接口。
2. 适配器模式的原有接口没有问题，只是需要去兼容客户端，因此进行一个转换，不会改变原有接口。

### 桥接模式
举例：

去和咖啡，有的人喜欢加糖，有的人喜欢多加奶，如果这个时候，按照加糖和加奶划分为一个维度，大小划分为大杯小杯，那么这样总共就会有四个`(2*2)`产品，如果此时需要新增一个加酸奶，那么总共就会有`2*3`个产品，这样的坏处就会产生类爆炸。

如果将糖和奶这个维度作为咖啡的参数进行引用，那么类的个数就会大大的减少。

定义：

桥接模式是将抽象部分和它的实现部分进行分离，使他们都可以独立的变化。(两个维度进行分离，一个维度关联使用另外一个维度，实现了组合)

类图：
![桥接模式类图](https://mypc-1313021454.cos.ap-beijing.myqcloud.com/designPattern/strcturalType/202305031725623.png)

### 装饰器模式
定义：动态给一个对象添加一些额外的功能。就新增功能来说，装饰器模式比生成子类更加灵活。

生成子类要求写一个新的子类，从而对类层级进行扩展。

类图：
![](https://mypc-1313021454.cos.ap-beijing.myqcloud.com/designPattern/strcturalType/202305031725223.png)

### 外观模式


定义：
要求一个子系统的外部与其内部的通信必须通过一个统一的对象进行。外观模式提供一个高层次的接口，使得子系统更容易使用。

类图：

![外观模式类图](https://mypc-1313021454.cos.ap-beijing.myqcloud.com/designPattern/strcturalType/202305031726831.png)

缺点：
不符合开闭原则。子系统一旦发生扩展的话，那么就必须修改外观模式的类(必须要修改代码，才能适应子系统的变更)。


### 享元模式
享元就是共享同一个东西

举例：

共享单车方便出行的一种工具，每个人都可以去使用它，在使用的时候，该自行车和别人共同使用过；
但是在使用的时候，对于共享单车而言，此时的使用者是不一样的。


定义：

运用共享计数有效地使用支持大量细类度的对象


类图：

![享元模式类图](https://mypc-1313021454.cos.ap-beijing.myqcloud.com/designPattern/strcturalType/202305031726741.png)


享元模式大量的使用在池技术中。


### 组合模式
举例：

国家统计财政的时候，都会是按照省进行统计，省又会按照市进行统计，...，最终会划分到最小的行政单位:乡，这样从下一级依次向上统计就能算出财政收入。

定义：

组合模式允许以相同的方式处理单个对象和对象的组合体。(个人理解：个体和整体都能分别进行处理)

类图：

![组合模式类图](https://mypc-1313021454.cos.ap-beijing.myqcloud.com/designPattern/strcturalType/202305031726460.png)

## 行为型
### 模板方法模式
什么模板？简历模板、毕业答辩模板、ppt模板...，所谓的模板其实就是大致告诉你需要做哪些事。

举例：

减脂增肌的模板：
1. 有氧运动
2. 减脂饮食
3. 重量训练
...

这一套流程就可以形成所谓的模板，即：规定好做这一件事需要完成的事

定义：

定义一个操作中的算法框架，而将一些步骤延迟到子类中，使得子类可以不改变一个算法结构就可以重定义该算法的某些特定步骤

类图：

![模板方法模式类图](https://mypc-1313021454.cos.ap-beijing.myqcloud.com/designPattern/behavioralType/202305031723205.png)

### 策略模式

举例：

洗衣机有不同的模式(正常、漂洗、大物、甩干等等)，那么这些模式对应洗衣机而言就是不同的策略

定义：

定义一组算法，将每个算法都封装起来，并且使他们之间可以互相转换。策略模式让算法独立于使用它的客户而变化。

类图：

![策略模式类图](https://mypc-1313021454.cos.ap-beijing.myqcloud.com/designPattern/behavioralType/202305031723404.png)

与状态模式的区别：

状态模式最重要的就是状态(可以由外部改变，也可以内部自身改变)，不同的状态对应不同的行为。

策略模式关注的是具体某一个行为，即：某一个行为的具体执行过程。(策略是由客户端指定的)

简单的说：状态模式是因为什么状态而做了什么事(做什么)，而策略模式是这件事具体怎么做。


### 命令模式
举例：

皇帝可以发号施令，有掌印、秉笔...，在皇帝处理事务的时候，就这可以像这些太监发出命令，...。，比如在需要使用到笔的时候，说一声需要笔，那么秉笔就会拿过来笔，需要使用到玉玺的时候，说一声需要玉玺，那么掌印就会递过来玉玺

那么，皇帝都是通过声音去控制这两个太监，对应类图中的Invoker

定义：

将一个请求封装成一个对象，从而让用户使用不同的请求把客户端参数化；对请求排队或记录日志，以及支持可撤销的操作。

类图：

![命令模式类图](https://mypc-1313021454.cos.ap-beijing.myqcloud.com/designPattern/behavioralType/202305031723072.png)

### 责任链模式
举例：

旅游社旅游路线：四川-->甘肃-->青海-->西藏，想去看每个省的景点，那么此时你的路线就形成了一条链，每个省份只能向你提供自己省份的景点。
而你并不关心路线怎么指定，也不需要关心景点什么样子，你只需要包名旅行社就可以。

定义：

责任链模式是一种请求的模式，让多个处理器都有机会处理该请求，直到其中某个处理器成功位置。责任链模式把多个处理器串成链，然后让请求在链上传递。


类图：

![责任链模式类图](https://mypc-1313021454.cos.ap-beijing.myqcloud.com/designPattern/behavioralType/202305031723888.png)


### 状态模式
举例：

如果你是一个财富自由的人，那么上班完全就是看心情。如果今天晴天，心情好你选择了上班；阴天，心情一般你选择了在家睡觉；雨天，心情糟糕你选择休假。
此时，你的心情就是你的状态。


定义：

允许一个对象在其内部状态改变的时候改变它的行为，对象看起来似乎修改了它的类。其别名为状态对象，状态模式是一种行为型模式。

类图：

![状态模式类图](https://mypc-1313021454.cos.ap-beijing.myqcloud.com/designPattern/behavioralType/202305031723763.png)

### 观察者模式
举例：

借钱还钱，张三找李四、王五、孙六...借钱，等张三有钱了之后就通知他们自己有钱可以开始还钱了。

![观察者模式直观图](https://mypc-1313021454.cos.ap-beijing.myqcloud.com/designPattern/behavioralType/202305031724377.png)

定义：

对象间一种一对多依赖关系，使得每当一个对象状态发生改变的时候，其相关依赖的对象都能都通知并被自动更新。

类图：

![观察者模式直观图](https://mypc-1313021454.cos.ap-beijing.myqcloud.com/designPattern/behavioralType/202305031723464.png)


### 中介者模式
举例：

在没有群聊的时候，只能去找到每一个人去单独进行聊天，那么有n个人就一共会产生`n * (n - 1) / 2`，如果有一个聊天室，那么就可以通过这个聊天室将消息进行转发，所有人与对方的聊天都必须经过这个聊天室(同理婚介所)。

定义：

中介者模式提供一个中介类用来处理不同类之间的通信，并支持松耦合，该模式用来降低多个对象和类之间的通信复杂性。


类图：

![中介者模式类图](https://mypc-1313021454.cos.ap-beijing.myqcloud.com/designPattern/behavioralType/202305031722986.png)

### 迭代器模式
举例：

Java中的iterator

定义：

在能不暴露集合底层表现形式的情况下遍历集合中所有的元素。

类图：
![迭代器模式类图](https://mypc-1313021454.cos.ap-beijing.myqcloud.com/designPattern/behavioralType/202305031722980.png)


### 访问者模式
该模式极少情况下会被使用

举例：

年底，CEO和CTO开始评定员工一年的工作绩效，员工分为工程师和经理，CTO关注工程师的代码量、经理的新产品数量；CEO关注的是工程师的KPI和经理的KPI以及新产品数量。
由于CEO和CTO对于不同员工的关注点是不一样的，这就需要对不同员工类型进行不同的处理。访问者模式此时可以派上用场了


定义：

在访问者模式（Visitor Pattern）中，我们使用了一个访问者类，它改变了元素类的执行算法。通过这种方式，元素的执行算法可以随着访问者改变而改变。元素对象已接受访问者对象，这样访问者对象就可以处理元素对象上的操作。


类图：

![访问者模式类图](https://mypc-1313021454.cos.ap-beijing.myqcloud.com/designPattern/behavioralType/202305031722987.png)

### 备忘录模式
举例：

打游戏正开心的时候需要去吃饭了，但是好在这个游戏可以读取存档，那么此时你吃完饭回来可以接着打。此时就相当于给游戏做了一个备忘录的情况

定义：

备忘录模式保存一个对象的某个状态，在允许不暴露对象实现细节的情况下在某个适当的时候恢复对象。

类图：

![备忘录模式类图](https://mypc-1313021454.cos.ap-beijing.myqcloud.com/designPattern/behavioralType/202305031722309.png)

### 解释器模式

举例：

给出一个字符串(表达式)，可以计算出结果，这个就是解释器最简单的举例。其他比如：正则表达式、语法解析...

定义：

解释器模式提供了评估语言的语法或者表达式的方法。该表达式实现一个表达式接口，该接口解释一个特定的上下文。

类图：

![解释器模式类图](https://mypc-1313021454.cos.ap-beijing.myqcloud.com/designPattern/behavioralType/202305031717089.png)

